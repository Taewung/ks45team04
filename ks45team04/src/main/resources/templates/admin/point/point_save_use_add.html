<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{admin/layout/adminDefault}">

	<!-- script start -->
	<th:block layout:fragment="customScript">
	<script>
	$(function(){
        $('#liName').val($('#liCode option:selected').text());
        $(document).on('change', '#liCode', function(){
            //console.log($('#liCode option:selected').text());
            let selectedLiName = $('#liCode option:selected').text();
            $('#liName').val(selectedLiName);
        });

        $(document).on('click', '.addNote', function(){
            $('#addNoteForm').submit();
        });
    })

        $('#submitBtn').click(function(){
        let isSubmit = true;

        $('#addNoteForm input').each(function(idx, item){
            let checkValue = $(item).val();
            let labelValue = $(item).parent('.mainDiv').find('label').text();
            if(validateValue(checkValue)){

                alert(${labelValue}를 입력해주세요);
                $(item).focus();
                isSubmit = false;
                return false;
            }

        });



        if(isSubmit) $('#addNoteForm').submit();
    });
	</script>
	</th:block> 
	<!-- script end -->
	
	<!-- customContents start -->
	<th:block layout:fragment="customContents">
		<h1>포인트 적립 등록</h1>
			<p class="pxp-text-light">Point save use.</p>
			<form ㅋth:action="@{/pointSaveUseAdd}" method="post" data-parsley-validate class="form-horizontal form-label-left" novalidate>
				<div class="row mt-4 mt-lg-5">
            	<div class="row justify-content-between align-content-center">
                    <div class="pxp-company-dashboard-jobs-bulk-actions mb-3">
               		<div class="col-md-6">
               			<div class="row">
                			<div class="col-md-6">
		               		<div class="mb-3">
								<label for="pointSaveUseId" class="form-label">회원 아이디</label>
									<input type="text" id="pointSaveUseId" name="pointSaveUseId"
								   	placeholder="회원 아이디" class="form-control"/>
							</div>
							</div>
						</div>
						
						<div class="row">
		                	<div class="mb-3">
		                         <label for="pointSaveUseReason" class="form-label">포인트 지급 사유</label>
		                         <div class="col-md-6 col-sm-6 ">
									<select id="pointSaveReason" name="pointSaveReason"class="form-select">
										<option value="미선택">선택해주세요.</option>
										<option value="회원가입">회원가입</option>
										<option value="챌린지 성공">챌린지 성공</option>
										<option value="노트 구매 리뷰">노트 구매 리뷰</option>
										<option value="합격자 리뷰 작성">합격자 리뷰 작성</option>
									</select>
								</div>	
		              		</div>
						</div>
						<div class="mb-3">
							<label for="pointSaveUsePoint" class="col-form-label col-md-3 col-sm-3 label-align">포인트 지급 금액</label>
							<div class="col-md-6 col-sm-6 ">
								<input type="number" id="pointSaveUsePoint" name="pointSaveUsePoint"
								   readonly="readonly" placeholder="포인트 지급 금액" class="form-control"/>
							</div>
						</div>
						<div class="item form-group">
							<label for="saveUseDatetime" class="col-form-label col-md-3 col-sm-3 label-align">포인트 지급 날짜</label>
							<div class="col-md-6 col-sm-6 ">
								<input type="date" id="saveUseDatetime" name="saveUseDatetime"
								   	class="form-control"/>
							</div>
						</div>
					</div>
				</div>
				</div>
				<div class="mt-4 mt-lg-5">
	                  <button type="button" id="submitBtn" class="btn rounded-pill pxp-section-cta">Save</button>
	                  <button type="button" id="cancelBtn" class="btn rounded-pill pxp-section-cta">Cancel</button>
				</div>
				</div>
			</form>
	</th:block>
	<!-- customContents end -->
	
	<!-- customJs start -->
	<th:block layout:fragment="customJs">
	<script type="text/javascript" th:inline="javascript">
			
			const $cancelBtn = document.getElementById('cancelBtn');
			const $submitBtn = document.getElementById('submitBtn');
			
			const $pointSaveReason = document.getElementById('pointSaveReason');
			const $pointSaveUsePoint = document.getElementById('pointSaveUsePoint');
			
			const $inputEle = document.querySelectorAll('.item > div > input');
			let pointSaveStandardArr = [[${pointSaveStandardList}]];
			
			
			$cancelBtn.addEventListener('click', function(){
				location.href = '/pointSaveUseList';
			});
			
			
			$submitBtn.addEventListener('click', function(){
				let checkFlag = true;
				$inputEle.forEach(function(item){
					if(item.value == '' || typeof item.value == 'undefined' || item.value == null){
						if(item.id != $pointSaveUseReason.value == '미선택'){
							checkFlag = false;
							}
					}
				})
				if(checkFlag){
					$submitBtn.setAttribute("type", "submit")
				}else{
					alert('값을 전부 입력해주세요.');
				}
			});
			
			$pointSaveUseReason.addEventListener('change', function(){
				$pointSaveUsePoint.value = '';
				$pointSaveUsePoint.readOnly = true;
					if($pointSaveReason.value == '회원가입'){
						$pointSaveStandard.value = 	pointSaveStandardArr[0];
					}else if($pointSaveReason.value == '챌린지 성공'){
						$pointSaveUsePoint.value = pointSaveStandardArr[1];
					}else if($pointSaveReason.value == '노트 구매 리뷰'){
						$pointSaveUsePoint.value = pointSaveStandardArr[2];
					}else if($pointSaveReason.value == '합격자 리뷰 작성'){
						$pointSaveUsePoint.value = pointSaveStandardArr[3];
					}
				}
			});
			
			const msg = [[${msg}]];
			if(msg != null){
				alert(msg);
			}
			
		</script>

	</th:block>
	<!-- customJs end -->
</html>